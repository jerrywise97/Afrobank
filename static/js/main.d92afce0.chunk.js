(this.webpackJsonpAfrobank=this.webpackJsonpAfrobank||[]).push([[0],{123:function(e,t,n){e.exports=n(277)},277:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(36),i=n.n(o),c=n(2),s=n(3),u=n(5),l=n(6),p=n(12),m=n(25),d=n(278),f=n(279),h=n(280),b=n(13),g=n(41);function v(){var e=Object(p.a)(["\n    height: 50px;\n"]);return v=function(){return e},e}var O=b.a.div(v()),j=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{style:{height:100}},a.a.createElement(d.a,null,a.a.createElement(f.a,null,a.a.createElement(h.a,null,a.a.createElement(O,{className:"d-flex justify-content-between align-items-center"},a.a.createElement(f.a,{xl:6}),a.a.createElement(f.a,{xl:6,className:"d-flex justify-content-between"},a.a.createElement(g.b,{to:"/signin"},"sign in"),a.a.createElement(g.b,{to:"/register"},"register")))))))}}]),n}(r.Component),y=Object(m.b)((function(e){return{isSignedIn:e.user.signIn.isSignedIn}}),{})(j),E=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Dashboard"))}}]),n}(a.a.Component),w=n(9),x=n.n(w),k=n(16),S=n(112),C=n.n(S).a.create({baseURL:"https://afrobank.herokuapp.com/Api/v1"}),L=function(){var e=Object(k.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.post("/login",t);case 3:return r=e.sent,n(r.data.data,!0),e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),N=n(20),I=n(72),R=n(31),q=R.a().shape({email:R.b().required("email is required"),password:R.b().required("password is required")}),T=R.a().shape({recipient:R.b().trim().required("recipient account number is required"),pin:R.b().trim().required("pin is required to complete transaction"),amount:R.b().trim().required()}),A=(n(248),n(118)),M=n.n(A);function P(){var e=Object(p.a)(["\n    color: red;\n    font-weight: 600;\n    text-align: start;\n    font-size: 12px;\n"]);return P=function(){return e},e}function B(){var e=Object(p.a)(["\n    width: 70%;\n    height: 50px;\n    border: none;\n    outline: none;\n    color: white;\n    background: #0d3153;\n    border-radius: 7px;\n"]);return B=function(){return e},e}function _(){var e=Object(p.a)(["\n    border: 1px solid black;\n    border-radius: 12px;\n    height: 50px;\n    width: 100%;\n    padding-left: 20px;\n    padding-right: 20px;\n    outline: none;\n"]);return _=function(){return e},e}var z=b.a.input(_()),H=b.a.button(B()),D=b.a.p(P());function G(){var e=Object(p.a)(["\n    color: ",";\n"]);return G=function(){return e},e}var J=b.a.p(G(),(function(e){return e.color})),V=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).handleSubmit=function(){var e=Object(k.a)(x.a.mark((function e(t){var n,a,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.props,a=n.user_login,o=n.history,r.setState({formLoading:!0}),e.prev=2,e.next=5,L(t,a);case 5:r.setState({error:"",formLoading:!1}),o.push("/dashboard"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r.setState({error:e.t0.response.data.message||"An error occured",formLoading:!1});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),r.state={error:"",formLoading:!1},r}return Object(s.a)(n,[{key:"render",value:function(){var e=this.state.formLoading;return a.a.createElement("div",{className:"bg-dark d-flex justify-content-center align-items-center m-auto"},function(e,t){var n={width:"200px"};return a.a.createElement(I.a,{validationSchema:q,initialValues:{email:"",password:""},onSubmit:e,validateOnBlur:!1,validateOnChange:!1},(function(e){var r=e.errors,o=e.handleChange,i=e.handleSubmit;return a.a.createElement("form",{onSubmit:i},a.a.createElement(z,{type:"email",name:"email",onChange:o,placeholder:"Enter your email",autoComplete:"false",style:n}),a.a.createElement("br",null),!!r.email&&a.a.createElement("p",{style:{color:"red"}},r.email),a.a.createElement(z,{type:"password",name:"password",onChange:o,placeholder:"Enter your password",autoComplete:"false",style:n}),a.a.createElement("br",null),!!r.password&&a.a.createElement("p",{style:{color:"red"}},r.password),a.a.createElement(H,{type:"submit"},t?"...":"sign in"))}))}(this.handleSubmit,e),a.a.createElement("br",null),!!this.state.error&&a.a.createElement(J,{color:"red"},this.state.error))}}]),n}(a.a.Component),W=Object(m.b)(null,{user_login:function(e,t){return function(n){n({type:"LOGIN",payload:e,isSignedIn:t})}}})(V),U=n(58),$=n.n(U);function F(){var e=Object(p.a)(["\n    color: red;\n    font-weight: 500;\n    font-size: 18px;\n    width: 100%;\n"]);return F=function(){return e},e}var K=b.a.p(F()),Q=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement($.a,Object.assign({},this.props,{title:this.props.title,timeout:3e3,show:this.props.show,showConfirm:!1,onConfirm:function(){},showCancel:!1}),a.a.createElement("div",{style:{width:"100%"}},a.a.createElement(K,null,this.props.text)))}}]),n}(a.a.Component),X=function(){var e=Object(k.a)(x.a.mark((function e(t){var n,r,a,o,i,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.recipient,r=t.amount,a=t.pin,o=t.sender,i={recipient:n.toString(),amount:r.toString(),pin:a.toString(),sender:o.toString()},e.prev=2,e.next=5,C.post("/transfer",i);case 5:c=e.sent,console.log(c),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(2),e.t0;case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(k.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("/history/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data.message);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0.response;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();function Z(){var e=Object(p.a)(["\n    color: #0d3153;\n    font-size: 23px;\n    font-weight: 500;\n"]);return Z=function(){return e},e}var ee=b.a.p(Z()),te=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).handleSubmit=function(){var e=Object(k.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.props.accountNumber,r.setState({formLoading:!0}),a=Object(N.a)({sender:n},t),console.log(a),e.prev=4,e.next=7,X(a);case 7:r.setState({formLoading:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),r.setState({transferError:e.t0.response.data.message,formLoading:!1,show:!0});case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),r.state={formLoading:!1,show:!1,transferError:""},r}return Object(s.a)(n,[{key:"render",value:function(){var e,t,n=this,r=this.state,o=r.transferError,i=r.show;return a.a.createElement($.a,{title:"",show:this.props.show,showConfirm:!1,onConfirm:this.props.confirm},o&&a.a.createElement(Q,{danger:!0,show:i,text:"failed transfer",title:o,onConfirm:function(){return n.setState({transferError:""})}}),a.a.createElement("div",{className:"mb-3 d-flex align-items-center justify-content-center"},a.a.createElement(ee,null,"Transfer")),(e=this.handleSubmit,t=this.state.formLoading,a.a.createElement(I.a,{validateOnBlur:!1,validateOnChange:!1,initialValues:{recipient:"",amount:"",pin:""},validationSchema:T,onSubmit:e},(function(e){var n=e.errors,r=e.handleChange,o=e.handleSubmit;return e.values,a.a.createElement("form",{onSubmit:o},a.a.createElement(z,{className:"mb-3",type:"number",name:"recipient",placeholder:"recipient",onChange:r})," ",!!n.recipient&&a.a.createElement(D,null,n.recipient),a.a.createElement(z,{type:"number",name:"amount",className:"mb-3",placeholder:"enter amount",onChange:r}),!!n.amount&&a.a.createElement(D,null,n.amount),a.a.createElement(z,{className:"mb-3",type:"number",placeholder:"enter pin",onChange:r,name:"pin",maxLength:4}),!!n.pin&&a.a.createElement(D,null,n.pin),a.a.createElement(H,{type:"submit",className:"mt-3 mb-2"},t?a.a.createElement(M.a,{styles:{spinner:function(e){return Object(N.a)(Object(N.a)({},e),{},{width:"20px","& svg circle":{stroke:"white"}})}},spinner:!0,active:!0}):"send"))}))))}}]),n}(a.a.Component),ne=Object(m.b)((function(e){return{accountNumber:e.user.signIn.payLoad.accountNumber}}),{})(te);function re(){var e=Object(p.a)(["\n    color: ",";\n"]);return re=function(){return e},e}function ae(){var e=Object(p.a)(["\n    background: purple;\n    width: 250px;\n    border-radius: 10px;\n"]);return ae=function(){return e},e}var oe=b.a.div(ae()),ie=b.a.span(re(),(function(e){return e.color})),ce=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).componentDidMount=Object(k.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.payLoad.accountNumber,e.t0=r,e.next=4,Y(t);case 4:e.t1=e.sent,e.t2={AllTransactionHistory:e.t1},e.t0.setState.call(e.t0,e.t2);case 7:case"end":return e.stop()}}),e)}))),r.toggleModal=function(){r.setState({toggleTransferModal:!r.state.toggleTransferModal})},r.state={toggleTransferModal:!1,AllTransactionHistory:[]},r}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props.payLoad,n=t.firstName,r=t.accountNumber,o=this.state,i=o.toggleTransferModal,c=o.AllTransactionHistory;return a.a.createElement("div",null,a.a.createElement("h1",null,"hello ",n),a.a.createElement("p",null,"Account number ",r),a.a.createElement("button",{onClick:function(){return e.toggleModal()}},"Transfer money"),a.a.createElement(ne,{show:i,confirm:function(){return e.toggleModal()}}),a.a.createElement(oe,null,!!c&&c.map((function(e,t){return a.a.createElement("div",{key:t},e.transaction_date,a.a.createElement(ie,{color:"credit"===e.transaction_type?"green":"red"},e.amount))}))))}}]),n}(a.a.Component),se=Object(m.b)((function(e){return{payLoad:e.user.signIn.payLoad}}),{})(ce),ue=n(8),le=[{path:"/register",component:E},{path:"/signin",component:W},{path:"/dashboard",component:se}],pe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement(g.a,null,a.a.createElement(ue.c,null,le.map((function(e,t){return a.a.createElement(ue.a,{key:t,path:e.path,component:e.component})})),a.a.createElement(ue.a,{path:"/",component:y})))}}]),n}(r.Component),me=n(22),de=n(119),fe=n(73),he=n(120),be=n.n(he),ge={signIn:{isSignedIn:!1,payLoad:{}},userReg:{isRegistered:!1,payLoad:{}},userPinReset:{isPinReset:!1,payLoad:{}}},ve=Object(me.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{signIn:Object(N.a)(Object(N.a)({},e),{},{isSignedIn:t.isSignedIn,payLoad:t.payload})};case"register":return{userReg:Object(N.a)(Object(N.a)({},e),{},{isRegistered:t.isRegistered,payLoad:t.payload})};case"pinReset":return{userPinReset:Object(N.a)(Object(N.a)({},e),{},{isPinReset:t.isPinReset,payLoad:t.payload})};default:return e}}}),Oe={key:"root",storage:be.a,whitelist:["user"]},je=[de.a],ye=Object(fe.a)(Oe,ve),Ee=function(){var e=Object(me.d)(ye,me.a.apply(void 0,je));return{store:e,persiststore:Object(fe.b)(e)}},we=n(121);n(276);var xe=function(){return a.a.createElement(m.a,{store:Ee().store},a.a.createElement(we.a,{loading:null,persistor:Ee().persiststore},a.a.createElement(pe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[123,1,2]]]);
//# sourceMappingURL=main.d92afce0.chunk.js.map